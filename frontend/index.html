<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDU PARTY: Educational Mayhem</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Coming+Soon&display=swap" rel="stylesheet">
</head>

<body>

    <!-- PERSISTENT UI -->
    <div id="profile-badge" class="profile-badge hidden">
        <div id="badge-icon" class="avatar-icon shape-circle" style="background-color: #E74C3C;"></div>
        <span id="badge-username">Student</span>
    </div>

    <!-- SCREEN: AUTH -->
    <div id="screen-auth" class="screen active">
        <div class="panel chalkboard-inset">
            <h1 style="color:var(--school-bus-yellow); font-size: 3rem;">EDU PARTY</h1>
            <h3>Educational Mayhem Edition</h3>
            <p id="auth-mode-label">Please Sign In to Class</p>

            <form id="auth-form">
                <input type="text" id="auth-username" placeholder="Student Name" required>
                <input type="password" id="auth-password" placeholder="Password" required>

                <!-- Registration-only fields (hidden by default) -->
                <div id="register-fields" class="hidden">
                    <div class="color-grid" style="margin: 15px 0;">
                        <div class="color-dot" style="background:#E74C3C" data-color="#E74C3C"></div>
                        <div class="color-dot" style="background:#3498DB" data-color="#3498DB"></div>
                        <div class="color-dot" style="background:#2ECC71" data-color="#2ECC71"></div>
                        <div class="color-dot" style="background:#F1C40F" data-color="#F1C40F"></div>
                        <div class="color-dot selected" style="background:#9B59B6" data-color="#9B59B6"></div>
                    </div>
                    <select id="auth-shape" style="padding:8px; font-size:1rem; width:100%; margin:10px 0;">
                        <option value="circle">Circle</option>
                        <option value="square" selected>Square</option>
                        <option value="triangle">Triangle</option>
                    </select>
                </div>

                <br><br>
                <button type="submit" class="btn-primary" id="auth-submit-btn">ENTER</button>
            </form>
            <p id="auth-error" style="color:var(--danger-pink)"></p>
            <br>
            <a href="#" id="toggle-auth-mode" style="color:var(--chalk-white); font-size:0.9rem;">Need access? Register
                here</a>
        </div>
    </div>

    <!-- SCREEN: HOME (Dashboard) -->
    <div id="screen-home" class="screen">
        <div class="panel">
            <h1>CLASS DASHBOARD</h1>

            <!-- Create Lobby Section -->
            <div style="background:rgba(0,0,0,0.2); padding:15px; border-radius:10px; margin-bottom:20px;">
                <h2>Host a Sector</h2>
                <div style="margin: 10px 0;">
                    <label>Max Students: <span id="capacity-val">15</span></label>
                    <input type="range" id="capacity-input" min="5" max="50" value="15">
                </div>
                <button id="btn-create" class="btn-primary" style="font-size:1rem;">CREATE NEW CLASS</button>
            </div>

            <!-- Join Lobby Section -->
            <div class="chalkboard-inset">
                <h2>Active Classes</h2>
                <div id="lobby-list" class="lobby-list-container">
                    <!-- Dynamic Rows -->
                    <div style="padding:20px; color:#aaa;">Loading...</div>
                </div>
                <button id="btn-refresh">REFRESH</button>
            </div>
        </div>
    </div>

    <!-- SCREEN: LOBBY -->
    <div id="screen-lobby" class="screen">
        <div class="panel chalkboard-inset" style="max-width:800px;">
            <h1>CLASSROOM <span id="lobby-title-id">#0000</span></h1>
            <h3 id="lobby-host-name" style="color:#aaa;">Host: Unknown</h3>

            <hr style="border-color: rgba(255,255,255,0.2);">

            <div id="roster-grid" class="roster-grid">
                <!-- Dynamic Player Cards -->
            </div>

            <br>
            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                <button id="btn-ready" class="btn-primary" style="background:#E74C3C; font-size:1rem;">READY</button>
                <button id="btn-start" class="btn-primary" style="background:#F39C12; font-size:1rem; display:none;"
                    disabled>START GAME</button>
                <button id="btn-leave"
                    style="background:var(--danger-pink); color:white; padding:10px 20px; font-size:1rem;">LEAVE
                    CLASS</button>
            </div>
        </div>
    </div>

    <!-- SCREEN: GAME 1 (Math Quiz) -->
    <div id="screen-game1" class="screen">
        <div class="panel" style="max-width:900px; width:95%;">
            <h1>üßÆ MATH QUIZ</h1>
            <div id="game-timer" style="font-size:3rem; color:var(--school-bus-yellow); margin:20px 0;">20</div>

            <div class="chalkboard-inset" style="padding:30px; margin:20px 0;">
                <h2 id="math-question" style="font-size:2.5rem; color:var(--chalk-white);">Loading...</h2>
                <input type="number" id="math-answer" placeholder="Your Answer"
                    style="font-size:1.5rem; text-align:center; width:200px; margin:20px;">
                <br>
                <button id="btn-submit-answer" class="btn-primary">SUBMIT</button>
                <div id="answer-feedback" style="margin-top:15px; font-size:1.2rem; min-height:30px;"></div>
            </div>

            <div style="margin-top:20px;">
                <h3>üèÜ LEADERBOARD</h3>
                <div id="game-leaderboard" class="leaderboard-container">
                    <!-- Dynamic leaderboard -->
                </div>
            </div>
        </div>
    </div>

    <!-- SCREEN: INTERMISSION -->
    <div id="screen-intermission" class="screen">
        <div class="panel" style="max-width:800px;">
            <h1>üìä ROUND RESULTS</h1>

            <div class="chalkboard-inset" style="margin:20px 0; padding:20px;">
                <h2 style="color:var(--school-bus-yellow);">‚úÖ ADVANCING</h2>
                <div id="advancing-list" class="player-list"></div>

                <hr style="border-color: rgba(255,255,255,0.3); margin:20px 0;">

                <h2 style="color:var(--danger-pink);">‚ùå ELIMINATED</h2>
                <div id="eliminated-list" class="player-list"></div>
            </div>

            <div id="next-game-info" style="margin-top:20px; font-size:1.2rem;">
                <!-- Next game countdown or winner announcement -->
            </div>
        </div>
    </div>

    <!-- SCREEN: SPECTATOR -->
    <div id="screen-spectator" class="screen">
        <div class="panel" style="max-width:800px;">
            <h1>üëÅÔ∏è SPECTATOR MODE</h1>
            <p style="color:#aaa; font-size:1.2rem;">You've been eliminated, but you can watch the remaining players!
            </p>

            <div class="chalkboard-inset" style="margin:20px 0;">
                <h2>Current Game Progress</h2>
                <div id="spectator-leaderboard" class="leaderboard-container">
                    <!-- Live leaderboard for spectators -->
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL: PROFILE -->
    <div id="modal-profile" class="modal-overlay hidden">
        <div class="panel">
            <h2>STUDENT ID</h2>

            <!-- Colors -->
            <div class="color-grid">
                <div class="color-dot" style="background:#E74C3C" data-color="#E74C3C"></div>
                <div class="color-dot" style="background:#3498DB" data-color="#3498DB"></div>
                <div class="color-dot" style="background:#2ECC71" data-color="#2ECC71"></div>
                <div class="color-dot" style="background:#F1C40F" data-color="#F1C40F"></div>
                <div class="color-dot" style="background:#9B59B6" data-color="#9B59B6"></div>
            </div>

            <!-- Shapes -->
            <div style="margin: 20px;">
                <label>Shape:</label>
                <select id="profile-shape" style="padding:5px; font-size:1.2rem;">
                    <option value="circle">Circle</option>
                    <option value="square">Square</option>
                    <option value="triangle">Triangle</option>
                </select>
            </div>

            <button id="btn-save-profile" class="btn-primary">SAVE ID</button>
            <br><br>
            <button id="btn-cancel-profile" style="background:none; color:#aaa; font-size:0.9rem;">Cancel</button>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>